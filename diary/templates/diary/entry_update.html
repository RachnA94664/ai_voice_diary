{% extends "diary/base.html" %}
{% block title %}Edit Entry | AI Voice Diary{% endblock %}
{% block content %}
<div class="container" style="max-width:600px;margin:0 auto;padding:2rem 0;">
    <div class="card" style="background:#202137;border-radius:14px;padding:2rem;">
        <h2 style="color:#ddd;font-size:2rem;font-weight:700;">Edit Diary Entry</h2>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group" style="margin-bottom:1rem;">
                <label for="entry_type" style="color:#bbb;">Type:</label>
                <select name="entry_type" id="entry_type">
                  <option value="text" {% if entry.entry_type == "text" %}selected{% endif %}>Text</option>
                  <option value="voice" {% if entry.entry_type == "voice" %}selected{% endif %}>Voice</option>
                </select>
            </div>
            <div class="form-group" style="margin-bottom:1rem;">
                <label for="content" style="color:#bbb;">Text Content:</label>
                <textarea name="content" id="content" rows="4" style="width:100%;">{{ entry.transcription }}</textarea>
            </div>
            <div class="form-group" style="margin-bottom:1rem;">
                <label for="audio_file" style="color:#bbb;">Upload Audio (for Voice Entry):</label>
                {% if entry.audio_file %}
                  <br/>
                  <audio controls src="{{ entry.audio_file.url }}" style="width:100%;"></audio>
                  <br/>
                {% endif %}
                <input type="file" name="audio_file" id="audio_file" accept="audio/*">
            </div>
            <button type="submit" style="background:#866cfb;color:#fff;padding:10px 28px;border:none;border-radius:24px;font-size:1em;">Save Changes</button>
            <a href="{% url 'diary:entry_detail' entry.id %}" style="margin-left:24px;">Cancel</a>
        </form>
    </div>
</div>
{% endblock %}
